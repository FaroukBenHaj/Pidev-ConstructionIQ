<div class="container mt-4">

    <!-- ✅ Message de succès -->
    <div *ngIf="showSuccess" class="alert alert-success text-center" [@fadeIn]>
      ✅ Budget ajouté avec succès !
    </div>
  
    <div class="card shadow-lg p-4">
      <h3 class="text-center text-primary mb-4">Ajouter un Budget</h3>
  
      <form [formGroup]="budgetForm" (ngSubmit)="onSubmit()" [@fadeIn]>
  
        <!-- 🧮 Montants -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="montantTotal" class="form-label">Montant Total (€)</label>
            <input type="number" id="montantTotal" class="form-control" formControlName="montantTotal">
          </div>
  
          <div class="col-md-6 mb-3">
            <label for="montantRestant" class="form-label">Montant Restant (€)</label>
            <input type="number" id="montantRestant" class="form-control" formControlName="montantRestant">
            <div *ngIf="budgetForm.get('montantRestant')?.errors?.['montantRestantInvalid']" class="text-danger">
              ❌ Le montant restant ne peut pas dépasser le montant total.
            </div>
          </div>
        </div>
  
        <!-- 🆔 Projet -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="projetId" class="form-label">ID du Projet</label>
            <input type="number" id="projetId" class="form-control" formControlName="projetId">
          </div>
  
          <div class="col-md-6 mb-3">
            <label for="dateCreation" class="form-label">Date de Création</label>
            <input type="datetime-local" id="dateCreation" class="form-control" formControlName="dateCreation">
          </div>
        </div>
  
        <!-- ✅ Bouton -->
        <div class="text-center mt-3">
          <button class="btn btn-success px-4" type="submit" [disabled]="!budgetForm.valid">
            <i class="fas fa-save"></i> Enregistrer
          </button>
        </div>
  
      </form>
    </div>
  
    <!-- 📜 Liste des Budgets (optionnel) -->
    <div class="mt-5">
      <h4>Budgets enregistrés :</h4>
      <ul class="list-group" *ngIf="budgets.length > 0">
        <li *ngFor="let b of budgets" class="list-group-item d-flex justify-content-between align-items-center" [@fadeIn]>
          Projet #{{ b.projetId }} — {{ b.montantTotal }} €
          <button class="btn btn-sm btn-outline-danger" (click)="deleteBudget(b.id)">🗑 Supprimer</button>
        </li>
      </ul>
      <div *ngIf="budgets.length === 0" class="text-muted">Aucun budget enregistré pour le moment.</div>
    </div>
  
  </div>
  